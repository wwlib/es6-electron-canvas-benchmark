{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["/**\n * Created by Andrew Rapo on 8/26/15.\n */\n\nimport Sprite from './game/sprite';\nimport MovingObject from './game/movingObject';\nimport Rect from './game/rect';\nimport getTimer from './get-timer';\nimport config from '../config';\n\n// **** CANVAS ****\n\nlet canvas = document.getElementById(\"benchmark-canvas\");\nlet canvasContext = canvas.getContext(\"2d\");\nconsole.log(\"canvas: \" + canvas + \", \" + canvasContext);\n\nlet spriteList = [];\nlet spriteCount = 4;\nlet crystal_sprite = new Sprite(\"crystal\", null, 20, 20);\ncrystal_sprite.load(\"./images/crystal.png\", onSpriteReady);\n\nlet player_sprite = new Sprite(\"player\", null, 20, 20);\nplayer_sprite.load(\"./images/player.png\", onSpriteReady);\n\nlet debris_sprite = new Sprite(\"debris\", null, 20, 20);\ndebris_sprite.load(\"./images/debris.png\", onSpriteReady);\n\nlet bullet_sprite = new Sprite(\"bullet\", null, 20, 20);\nbullet_sprite.load(\"./images/bullet.png\", onSpriteReady);\n\nlet spritesLoaded = 0;\nlet movingObjects = [];\nlet prevTimestamp = 0;\nlet frameTime = 0;\nlet frameRate = 0;\nlet frameCount = 0;\nlet lastFrameTime = getTimer();\nlet lastFPSUpdateTime = getTimer();\n\n\n\nlet testEnded = false;\nlet testSpritesIncrement = config.testSpritesIncrement;\nlet maxRenderedSprites = config.maxRenderedSprites;\nlet testIterationInterval = config.testIterationInterval;\nlet testIteration = 0;\nlet testIterationElapsedTime = null;\nlet testSpritesCount = testSpritesIncrement;\nlet score = 0;\n\n\n// **** TEST **** //\n\nfunction updateTestInterval(dTime) {\n    if (testIterationElapsedTime === null) {\n        testIterationElapsedTime = 0;\n        testIteration = 0;\n        testSpritesCount = testSpritesIncrement;\n        testEnded = false;\n        score = 0;\n        console.log(`Test Started...`);\n    } else {\n        testIterationElapsedTime += dTime;\n    }\n\n    if (testIterationElapsedTime >= testIterationInterval) {\n        testIterationElapsedTime = 0;\n        console.log(`Test Iteration ${testIteration} Completed: FPS: ${frameRate}, Sprites: ${testSpritesCount}`);\n        score += frameRate;\n        testIteration++;\n        testSpritesCount += testSpritesIncrement;\n\n        if (testSpritesCount > maxRenderedSprites) {\n            testEnded = true;\n            console.log(`Test Completed!`);\n            fillText(canvasContext, \"Test Completed! Score: \" + score, \"12pt Courier New\", 10, 80, \"#FFFFFF\");\n        }\n    }\n\n}\n\nfunction update(dTime) {\n    for (let i=0; i < testSpritesCount; i++) {\n        let obj = movingObjects[i];\n        obj.update(dTime);\n        obj.draw(canvasContext);\n        if (!obj.inBounds) {\n            obj.coords.x = obj.bounds.left;\n        }\n    }\n}\n\n// **** MAIN LOOP ****\n\nfunction step(timestamp) {\n\n\n    frameCount++;\n    let now = getTimer();\n    let dTime = now - lastFrameTime;\n\n    canvasContext.clearRect(0, 0, canvas.width, canvas.height);\n\n    updateTestInterval(dTime);\n    if (!testEnded) {\n        update(dTime);\n        //window.requestAnimationFrame(step);\n        setTimeout(step,1);\n    }\n\n    let frameRateInterval = now - lastFPSUpdateTime;\n    if (frameRateInterval > 1000)\n    {\n        frameRate = Math.floor(1000 / (frameRateInterval / frameCount));\n        lastFPSUpdateTime = now;\n        frameCount = 0;\n    }\n    lastFrameTime = now;\n\n    fillText(canvasContext, \"FPS: \" + frameRate, \"12pt Courier New\", 10, 20, \"#FFFFFF\");\n    fillText(canvasContext, \"dTime: \" + dTime, \"12pt Courier New\", 10, 40, \"#FFFFFF\");\n    fillText(canvasContext, \"Sprites: \" + testSpritesCount, \"12pt Courier New\", 10, 60, \"#FFFFFF\");\n\n\n}\n\nfunction mainLoop() {\n    while (!testEnded) {\n        step();\n    }\n}\n\n// Counts the # of sprites that have been successfully loaded\n// Poor man's asset manager\nfunction onSpriteReady(sprite) {\n    console.log(\"onSpriteReady: \" + sprite.id);\n    spriteList.push(sprite);\n    spritesLoaded++;\n    if (spritesLoaded >= spriteCount) {\n        for (let i=0; i< maxRenderedSprites; i++) {\n            let random_sprite_index = Math.floor(Math.random() * spriteCount);\n            let random_sprite = spriteList[random_sprite_index];\n            let random_x = Math.floor(Math.random() * 1280);\n            let random_y = Math.floor(Math.random() * 720);\n            let random_velocity = 320 + Math.floor(Math.random() * 320);\n            let moving_object = new MovingObject(random_sprite, random_x, random_y, {x: random_velocity, y: 0});\n            moving_object.boundsRect = new Rect({top: 0, left: -40, width: 1320, height: 720});\n            movingObjects.push(moving_object);\n        }\n        //window.requestAnimationFrame(step);\n        //mainLoop();\n        setTimeout(step,1);\n    }\n}\n\nfunction fillText(ctx, txt, font, x, y, color) {\n    ctx.save();\n    if (color) ctx.fillStyle = color;\n    ctx.font = font;\n    ctx.fillText(txt, x, y);\n    ctx.restore();\n}"],"sourceRoot":"/source/"}