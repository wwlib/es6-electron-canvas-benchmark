{"version":3,"sources":["main-sukin.js"],"names":[],"mappings":"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","file":"main-sukin.js","sourcesContent":["// Isaac Sukin\n// http://www.isaacsukin.com/news/2015/01/detailed-explanation-javascript-game-loops-and-timing\n\nimport config from '../config-sukin';\n\nlet testSpritesIncrement = config.testSpritesIncrement;\nlet maxRenderedSprites = config.maxRenderedSprites;\nlet testIterationInterval = config.testIterationInterval;\nlet clearCanvasPerFrame = config.clearCanvasPerFrame;\nlet clearSpritePerFrame = config.clearSpritePerFrame;\nlet useSetTimeout = config.useSetTimeout;\nlet maxFPS = config.maxFPS;\nlet throttleFramerate = config.throttleFramerate;\n\nvar box = document.getElementById('box'),\n    fpsDisplayGame = document.getElementById('fpsDisplayGame'),\n    fpsDisplaySystem = document.getElementById('fpsDisplaySystem'),\n    boxPos = 10,\n    boxLastPos = 10,\n    boxVelocity = 0.08,\n    limit = 300,\n    lastFrameTimeMs = 0,\n    //maxFPS = 60,\n    delta = 0,\n    timestep = 1000 / maxFPS,\n    gameFPS = maxFPS,\n    systemFPS = maxFPS,\n    framesThisSecond = 0,\n    systemFramesThisSecond = 0,\n    lastFpsUpdate = 0;\n\nfunction update(delta) {\n    boxLastPos = boxPos;\n    boxPos += boxVelocity * delta;\n    // Switch directions if we go too far\n    if (boxPos >= limit || boxPos <= 0) boxVelocity = -boxVelocity;\n}\n\nfunction draw(interp) {\n    box.style.left = (boxLastPos + (boxPos - boxLastPos) * interp) + 'px';\n    fpsDisplayGame.textContent = Math.round(gameFPS) + ' Game FPS';\n    fpsDisplaySystem.textContent = Math.round(systemFPS) + ' System FPS';\n}\n\nfunction panic() {\n    delta = 0;\n    console.log(`Panic.`);\n}\n\nfunction begin() {\n}\n\nfunction end(gameFPS) {\n    if (gameFPS < 25) {\n        box.style.backgroundColor = 'blue';\n    }\n    else if (gameFPS > 30) {\n        box.style.backgroundColor = 'red';\n    }\n}\n\nfunction mainLoop(timestamp) {\n    if (!timestamp) {\n        timestamp = Date.now();\n    }\n    systemFramesThisSecond++;\n    // Throttle the frame rate.    \n    if (throttleFramerate && timestamp < lastFrameTimeMs + (timestep)) {\n        if (useSetTimeout) {\n            setTimeout(mainLoop,1);\n        } else {\n            window.requestAnimationFrame(mainLoop);\n        }\n        //console.log(`Throttling.`);\n        return;\n    }\n    delta += timestamp - lastFrameTimeMs;\n    lastFrameTimeMs = timestamp;\n\n    begin(timestamp, delta);\n\n    if (timestamp > lastFpsUpdate + 1000) {\n        gameFPS = 0.25 * framesThisSecond + 0.75 * gameFPS;\n        systemFPS = 0.25 * systemFramesThisSecond + 0.75 * systemFPS;\n\n        lastFpsUpdate = timestamp;\n        framesThisSecond = 0;\n        systemFramesThisSecond = 0;\n    }\n    framesThisSecond++;\n\n    var numUpdateSteps = 0;\n    while (delta >= timestep) {\n        update(timestep);\n        delta -= timestep;\n        if (++numUpdateSteps >= 240) {\n            panic();\n            break;\n        }\n    }\n\n    draw(delta / timestep);\n\n    end(gameFPS);\n\n    if (useSetTimeout) {\n        setTimeout(mainLoop,1);\n    } else {\n        window.requestAnimationFrame(mainLoop);\n    }\n}\n\nif (useSetTimeout) {\n    setTimeout(mainLoop,1);\n} else {\n    window.requestAnimationFrame(mainLoop);\n}"],"sourceRoot":"/source/"}